---
title: "dataVisualizationGGplot_dc"
author: "Brian Linn"
date: "December 27, 2017"
output: html_document
---


#Data Visualization with ggplot2

##Introduction to ggplot2


```{r firstExample}
library(MASS)
library(ggplot2)
ggplot(mammals, aes(x = body, y = brain)) +
        geom_point(alpha = 0.6) +
        stat_smooth(method = "lm",
                    col = "red",
                    se = FALSE)
#the line above is a poor fit
#use log to get a better line
ggplot(mammals, aes(x = body, y = brain)) +
        geom_point(alpha = 0.6) +
        coord_fixed() + 
        scale_x_log10() +
        scale_y_log10() +
        stat_smooth(method = "lm",
                    col = "#C42126",
                    se = FALSE,
                    size = 1)

```

###Exploring ggplot2, part 1
To get a first feel for ggplot2, let's try to run some basic ggplot2 commands. Together, they build a plot of the mtcars dataset that contains information about 32 cars from a 1973 Motor Trend magazine. This dataset is small, intuitive, and contains a variety of continuous and categorical variables.

Load the ggplot2 package using library(). It is already installed on DataCamp's servers.
Use str() to explore the structure of the mtcars dataset.
Hit Submit Answer. This will execute the example code on the right. See if you can understand what ggplot does with the data.

```{r ggplot2Part1}
# Load the ggplot2 package
library(ggplot2)

# Explore the mtcars data frame with str()
str(mtcars)

# Execute the following command
ggplot(mtcars, aes(x = cyl, y = mpg)) +
  geom_point()

```

###Exploring ggplot2, part 2
The plot from the previous exercise wasn't really satisfying. Although cyl (the number of cylinders) is categorical, it is classified as numeric in mtcars. You'll have to explicitly tell ggplot2 that cyl is a categorical variable.

Change the ggplot() command by wrapping factor() around cyl.
Hit Submit Answer and see if the resulting plot is better this time.

```{r ggplotPart2}
# Load the ggplot2 package
library(ggplot2)

# Change the command below so that cyl is treated as factor
ggplot(mtcars, aes(x = factor(cyl), y = mpg)) +
  geom_point()

```

###Grammar of graphics
* plotting framework
* leland wilkinson, grammar of graphics 1999
* 2 principles
        + grpahics = distinct layers of grammatical elements
        + meaningful plots through aesthetic mapping
* Bulding blocks
* Solid, creative meaningful visualizations

###Essential Grammatical Elements
**Required**

* **Data** - the dataset being plotted
* **Aesthetics** - the scales onto which we map our data
* **Geometries** - the visual elements used for our data

**Optional**

* **Facets** - plotting small multiples
* **Statistics** - representations of our data to aid in understanding
* **Coordinates** - the space on which the data will be plotted
Themes - All non-data ink
        
###Exploring ggplot2, part 3
We'll use several datasets throughout the courses to showcase the concepts discussed in the videos. In the previous exercises, you already got to know mtcars. Let's dive a little deeper to explore the three main topics in this course: The data, aesthetics, and geom layers.

The mtcars dataset contains information about 32 cars from 1973 Motor Trend magazine. This dataset is small, intuitive, and contains a variety of continuous and categorical variables.

You're encouraged to think about how the examples and concepts we discuss throughout these data viz courses apply to your own data-sets!

ggplot2 has already been loaded for you. Take a look at the first command. It plots the mpg (miles per galon) against the weight (in thousands of pounds). You don't have to change anything about this command.
In the second call of ggplot() change the color argument in aes() (which stands for aesthetics). The color should be dependent on the displacement of the car engine, found in disp.
In the third call of ggplot() change the size argument in aes() (which stands for aesthetics). The size should be dependent on the displacement of the car engine, found in disp.

```{r ggplotPart3}
library(ggplot2)
# A scatter plot has been made for you
ggplot(mtcars, aes(x = wt, y = mpg)) +
  geom_point()

# Replace ___ with the correct column
ggplot(mtcars, 
       aes(x = wt, 
           y = mpg, 
           color = disp)) +
  geom_point()

# Replace ___ with the correct column
ggplot(mtcars, 
       aes(x = wt, 
           y = mpg, 
           size = disp)) +
  geom_point()

#Understanding Variables
#In the previous exercise you saw that disp can be mapped onto a color gradient or onto a continuous size scale.

#Another argument of aes() is the shape of the points. There are a finite number of shapes which ggplot() can automatically assign to the points. However, if you try this command in the console to the right:

#ggplot(mtcars, aes(x = wt, y = mpg, shape = disp)) +
#  geom_point()

#It gives an error. What does this mean?
#The error message 'A continuous variable can not be mapped to shape', means that shape doesn't exist on a continuous scale here.
```

###ggplot Layer Building


```{r ggplotIrisExample}
levels(iris$Species) <- c("Setosa", "Versicolor", "Virginica")
#data
ggplot(iris,
       #Now aesthetics
       aes(x = Sepal.Length,
           y = Sepal.Width)) +
        #then geometries
        geom_jitter(alpha = 0.6) + 
        #followed by facets
        facet_grid(. ~ Species) +
        #add statistics for understanding
        stat_smooth(method = "lm",
                    se = F,
                    col = "red") +
        #coordinates come last
        scale_y_continuous("Sepal Width (cm)",
                           limits = c(2, 5), 
                           expand = c(0, 0)) +
        scale_x_continuous("Sepal Length (cm)",
                           limits = c(4, 8), 
                           expand = c(0, 0)) +
        coord_equal()
#use themes to add production quality details

```

